# Splunk MCP Server Environment Configuration
# Copy this file to .env and update with your Splunk instance details

# Splunk Connection Settings
SPLUNK_HOST=so1
SPLUNK_PORT=8089
SPLUNK_USERNAME=admin
SPLUNK_PASSWORD=Chang3d!
SPLUNK_VERIFY_SSL=false

# Optional: Splunk Image for docker-compose
SPLUNK_IMAGE=splunk/splunk:latest

# MCP Server Settings (optional overrides)
MCP_SERVER_HOST=0.0.0.0
MCP_SERVER_PORT=8003
MCP_LOG_LEVEL=INFO
MCP_SERVER_MODE=docker
MCP_HOT_RELOAD=true
MCP_AUTH_DISABLED=true

# HTTP transport behavior (recommended for local development)
# Enable stateless HTTP so clients don't require sticky sessions
MCP_STATELESS_HTTP=true
# Return JSON responses instead of SSE streams (improves compatibility with some clients)
MCP_JSON_RESPONSE=true

# Executed Workflows Storage
# Directory for latest executed workflows per (session_id, workflow_id)
EXECUTED_WORKFLOWS_DIR=./data/executed_workflows
# TTL for executed workflow records (seconds). Default 86400 (24h)
EXECUTED_WORKFLOWS_TTL_SECONDS=86400

# OpenAI Agent Settings
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-4o
OPENAI_TEMPERATURE=0.7
OPENAI_MAX_TOKENS=4000
OPENAI_TRACES_BASE_URL="https://platform.openai.com/logs/trace"

# OpenAI Rate Limiting & Retry Configuration
# Automatically handles rate limits with exponential backoff
OPENAI_MAX_RETRIES=3
OPENAI_RETRY_BASE_DELAY=1.0
OPENAI_RETRY_MAX_DELAY=60.0
OPENAI_RETRY_EXPONENTIAL_BASE=2.0
OPENAI_RETRY_JITTER=true

# Phoenix OpenTelemetry Tracing (optional)
# Enable observability for MCP tool calls, Splunk API interactions, and LLM calls
# Set to 'false' to disable Phoenix tracing
PHOENIX_ENABLED=true
# Phoenix OTLP collector endpoint (protobuf format)
PHOENIX_COLLECTOR_ENDPOINT=http://localhost:6006/v1/traces
# Phoenix project name for organizing traces
PHOENIX_PROJECT_NAME=mcp-server-for-splunk
# Service name and version for traces
MCP_SERVICE_NAME=mcp-server-for-splunk
MCP_SERVICE_VERSION=0.4.0

# Sentry Monitoring (optional) - install with: pip install mcp-server-for-splunk[sentry]
# SENTRY_DSN=https://your-key@o123.ingest.sentry.io/project-id
SENTRY_ENVIRONMENT=development
SENTRY_RELEASE=mcp-server-splunk@0.4.0
SENTRY_TRACES_SAMPLE_RATE=1.0
SENTRY_PROFILES_SAMPLE_RATE=0.1
SENTRY_DEBUG=false
SENTRY_ENABLE_LOGS=true
SENTRY_SEND_PII=true
